
scalar Datetime


enum TrackHandle {
  se
  ai
  pm
  ixd
  ac
  pmc
}

type CoreTeamMember {
  name: String!
  calendly: String!
}


type Document {
  bucket: String
  name: String
}

type Form {
  location: String
  streetNumber: String
  addressSuffix: String
  postcode: String
  city: String
  country: String
  accountHolder: String
  bankName: String
  iban: String
  bic: String
  shirtSize: String
  shirtStyle: String
  foodIntolerances: String
}

type Applicant {
  id: String!
  name: String!
  batch: Int! 
  track: Track! 
  email: String!
  cv: Document! 
  consent: String!
  scholarship: String
  coverLetter: Document
  source: String
  gender: String
  status: String! 
  acceptanceFormData: Form
  project: String
  strengths: String
}

type Track {
  handle: String!
  name: String!
  coreTeam: [CoreTeamMember!]
  challengeLink: [String]
  qaLink: String
}

type Comment {
  id: String!
  createdAt: Datetime!
  updatedAt: Datetime
  body: String!
  user: User!
}

type User {
 uid: String!
 name: String! 
 email: String!
 photo: String!
}


type Batch {
  batch: Int!
  startDate: Datetime!
  endDate: Datetime!
  appStartDate: Datetime!
  appEndDate: Datetime!
  appEndDateAI: Datetime!
  appEndDateIXD: Datetime!
  appEndDatePM: Datetime!
  appEndDateSE: Datetime!
}

type Exception {
  code: String
  message: String
}

type ApplicantList {
  list: [Applicant!]
}

type CommentList {
  list: [Comment!]
}

type BatchList {
  list: [Batch!]
}

type UserList {
  list: [User!]
}

type Status {
  code: String
  message: String
}

union ApplicantsQueryResult = ApplicantList | Exception
union CommentsQueryResult = CommentList | Exception
union ApplicantDetailsQueryResult = Applicant | Exception
union BatchesQueryResult = BatchList | Exception
union RateMutationResult = Status | Exception
union SendEmailMutationResult = Status | Exception
union SaveFormMutationResult = Status | Exception
union CreateCommentMutationResult = Status | Exception

type Query {
  applicants(batch_id_list: [Int!]): ApplicantsQueryResult
  applicantComments(batch_id: Int!, applicant_id: String!): CommentsQueryResult
  applicantsByStatus(batch_id_list: [Int!], track_list: [TrackHandle!], status_list: [String!]): ApplicantsQueryResult
  applicantDetails(batch_id: Int!, applicant_id: String!): ApplicantDetailsQueryResult
  batches(batch_id_list: [Int!]): BatchesQueryResult
  applicantsFromTrack(batch_id_list: [Int!], track_list: [TrackHandle!]): ApplicantsQueryResult
  applicantsFromStatus(batch_id_list: [Int!], status_list: [String!]): ApplicantsQueryResult
  user: User
  users: UserList
}

type Mutation {
  rate(batch_id: Int!, applicant_id: String!, score: Int!): RateMutationResult
  moveTrelloCard(source_list_name: String!, dest_list_name: String!, card_name: String!): RateMutationResult
  sendEmail(email_type:String!, applicant_id: String!, batch_id: Int): SendEmailMutationResult
  saveForm(applicant_id: String!, batch_id: Int, location: String!, streetNumber: String!, addressSuffix: String!, postcode: String!, city: String!, country: String!, accountHolder: String!, bankName: String!, iban: String!, bic: String!, shirtSize: String!, shirtStyle: String!, foodIntolerances: String!): SaveFormMutationResult
  createComment( batch_id: Int!, applicant_id: String!, comment_body: String!): SaveFormMutationResult
  editComment( batch_id: Int!, applicant_id: String!, comment_body: String!, comment_id:String! ): SaveFormMutationResult
  deleteComment( batch_id: Int!, applicant_id: String!, comment_id: String!): SaveFormMutationResult
  updateStatus(batch_id: Int!, applicant_id: String!, status: String!): RateMutationResult
}